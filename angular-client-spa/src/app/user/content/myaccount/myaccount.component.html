<ffbcomp-user-menu-header></ffbcomp-user-menu-header>

<div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">
    <div class="row">
        <ol class="breadcrumb">
            <li>
                <a routerLink="/user/home"> <span class="glyphicon glyphicon-home">  </span>
                </a>
            </li>
            <li class="active">{{title}}</li>
        </ol>
    </div>
    <!--Esto ya no es común a todas las páginas-->
    <!--Publicidad y etcs-->
    <div class="row">
        <!-- new user -->
        <div class="col-lg-10 col-sm-10 col-lg-offset-1">
            <div class="tarjeta hovercard">
                <div class="tarjeta-background">
                    <img *ngIf="userLogged.isMen && !userLogged.isPhotoSelected" class="tarjeta-bkimg" alt="" src="../assets/images/boyUser.svg">
                    <img *ngIf="!userLogged.isMen && !userLogged.isPhotoSelected" class="tarjeta-bkimg" alt="" src="../assets/images/userGirl.svg">
                    <img *ngIf="userLogged.isPhotoSelected" class="tarjeta-bkimg" alt="" src="http://127.0.0.1:8080/api/storage/files/{{userLogged.name}}-{{userLogged.id}}.png">
                </div>
                <div class="useravatar">
                    <img *ngIf="userLogged.isMen && !userLogged.isPhotoSelected" alt="" src="../assets/images/boyUser.svg">
                    <img *ngIf="!userLogged.isMen && !userLogged.isPhotoSelected" alt="" src="../assets/images/userGirl.svg">
                    <img *ngIf="userLogged.isPhotoSelected" alt="" src="http://127.0.0.1:8080/api/storage/files/{{userLogged.name}}-{{userLogged.id}}.png">

                </div>
                <div class="tarjeta-info">
                    <span class="tarjeta-title"><strong> {{userLogged.name}}
						</strong> <em> {{userLogged.email}} </em></span>
                </div>
            </div>
            <div class="btn- f btn-group btn-group-justified btn-group-lg" role="group" aria-label="...">
                <div class="btn-group" role="group">
                    <button type="button" id="stars" class="btn btn-default" [class.btn-primary]="selectedTab === 0" (click)="selectTab(0)">
							<span class="glyphicon glyphicon-user" aria-hidden="true"></span>
							<div class="hidden-xs">Mis Datos</div>
						</button>
                </div>
                <div class="btn-group" role="group">
                    <button type="button" id="favorites" class="btn btn-default" [class.btn-primary]="selectedTab === 1" (click)="selectTab(1)">
							<span class="glyphicon glyphicon-euro" aria-hidden="true"></span>
							<div class="hidden-xs">Mi Monedero</div>
						</button>
                </div>
                <div class="btn-group" role="group">
                    <button type="button" id="following" class="btn btn-default" [class.btn-primary]="selectedTab === 2" (click)="selectTab(2)">
							<span class="glyphicon glyphicon-list" aria-hidden="true"></span>
							<div class="hidden-xs">Mis apuestas</div>
						</button>
                </div>
                <div class="btn-group" role="group">
                    <button type="button" id="following" class="btn btn-default" [class.btn-primary]="selectedTab === 3" (click)="selectTab(3)">
							<span class="glyphicon glyphicon-heart" aria-hidden="true"></span>
							<div class="hidden-xs">Mi Equipo</div>
						</button>
                </div>
            </div>
            <div class="well">
                <div class="tab-content">
                    <tabset #staticTabs [justified]="true">
                        <!-- tab 1 -->
                        <tab (select)="selectTabFromInner(0)">
                            <div class="tab-pane fade in active collapse" id="tab1">
                                <div class="panel panel-primary" style="background-color: #FFD288">
                                    <div class="panel-body">
                                        <div class="row">
                                            <div style="margin-bottom: 10px;" class="col-md-12">
                                                <div class="panel-heading">
                                                    FICHA DE USUARIO

                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <form #updateUserForm="ngForm" id="form-updateDataUser" class="form-horizontal" (ngSubmit)="uploadUser()" novalidate>

                                                <div class="col-md-6">
                                                    <fieldset>
                                                        <!-- Nombre input-->
                                                        <div class="form-group">
                                                            <label class="col-md-3 control-label" for="name">Nombre</label>
                                                            <div class="col-md-9">
                                                                <input [(ngModel)]="userLogged.name" name="name"type="text" class="form-control">
                                                            </div>
                                                        </div>
                                                        <!-- 1Apellido input-->
                                                        <div class="form-group">
                                                            <label class="col-md-3 control-label" for="email">Primer
															Apellido</label>
                                                            <div class="col-md-9">
                                                                <input [(ngModel)]="userLogged.surname" name="surname" type="text" class="form-control" />
                                                            </div>
                                                        </div>
                                                        <!-- 2Apellido input -->
                                                        <div class="form-group">
                                                            <label class="col-md-3 control-label" for="email">Segundo
															Apellido</label>
                                                            <div class="col-md-9">
                                                                <input [(ngModel)]="userLogged.secondSurname" name="secondSurname" type="text" class="form-control" />
                                                            </div>
                                                        </div>
                                                        <!-- Ciudad input -->
                                                        <div class="form-group">
                                                            <label class="col-md-3 control-label" for="email">Ciudad</label>
                                                            <div class="col-md-9">
                                                                <input [(ngModel)]="userLogged.city" name="city" type="text" class="form-control" />
                                                            </div>
                                                        </div>
                                                        <!-- Pais input -->
                                                        <div class="form-group">
                                                            <label class="col-md-3 control-label" for="email">Pais</label>
                                                            <div class="col-md-9">
                                                                <input [(ngModel)]="userLogged.country" name="country" type="text" class="form-control">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="col-md-3 control-label" for="fileImage">Foto</label>
                                                            <div class="col-md-9">
                                                                <input id="fileImage" name="fileImage" type="file" (change)="uploadFile($event)" value="Subir imagen..." class="form-control">
                                                            </div>
                                                        </div>
                                                    </fieldset>

                                                </div>
                                                <div class="col-md-6">
                                                    <fieldset>
                                                        <!-- Nombre input-->
                                                        <div class="form-group">
                                                            <label class="col-md-3 control-label" for="name">Correo
															electronico</label>
                                                            <div class="col-md-9">
                                                                <input [(ngModel)]="userLogged.email" name="email" type="text" class="form-control" />
                                                            </div>
                                                        </div>
                                                        <!-- 1Apellido input-->
                                                        <div class="form-group">
                                                            <label class="col-md-3 control-label" for="email">Domicilio</label>
                                                            <div class="col-md-9">
                                                                <input [(ngModel)]="userLogged.location" name="location" type="text" class="form-control" />
                                                            </div>
                                                        </div>
                                                        <!-- 2Apellido input -->
                                                        <div class="form-group">
                                                            <label class="col-md-3 control-label" for="email">Telefono</label>
                                                            <div class="col-md-9">
                                                                <input [(ngModel)]="userLogged.telephone" name="telephone" type="text" class="form-control" />
                                                            </div>
                                                        </div>
                                                        <!-- Ciudad input -->
                                                        <div class="form-group">
                                                            <label class="col-md-3 control-label" for="email">Nueva
															Contraseña</label>
                                                            <div class="col-md-9">
                                                                <input ngModel #passUpdated="ngModel" id="pass" name="passPre" type="password" placeholder="Escribe tu nueva contraseña"
                                                                    class="form-control">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="col-md-3 control-label" for="email">Repite Nueva Contraseña</label>
                                                            <div class="col-md-9">
                                                                <input ngModel #passUpdatedBis="ngModel" id="passRepeat" name="passRepeatPre" type="password" placeholder="Repite tu nueva contraseña"
                                                                    class="form-control">
                                                                <div [hidden]="passUpdated.value == passUpdatedBis.value" class="alert alert-danger">
                                                                    Recuerda que ambas contraseñas han de ser iguales
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <!-- Pais input -->
                                                        <div class="form-group">
                                                            <label class="col-md-3 control-label" for="email">DNI/NIF</label>
                                                            <div class="col-md-9">
                                                                <input [(ngModel)]="userLogged.dni" name="dni" type="text" class="form-control">
                                                            </div>
                                                        </div>
                                                    </fieldset>
                                                </div>

                                                <div style="float: right; margin-right: 10%;">
                                                    <img style="opacity: 0.2;" class="glyph stroked pencil" src="../assets/images/iconedit.png" />
                                                    <button id="editarDatos" type="submit" class="btn btn-primary">Guardar</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </tab>
                        <!-- ./tab 1 -->
                        <!-- tab 2 -->
                        <tab (select)="selectTabFromInner(1)">
                            <div class="tab-pane fade in" id="tab2">
                                <div class="panel panel-primary" style="background-color: #FFD288">
                                    <div class="panel-body">
                                        <div class="row">
                                            <div style="margin-bottom: 10px;" class="col-md-12">
                                                <div class="panel-heading">
                                                    TU SALDO
                                                    <div style="float: right;">
                                                        <img style="opacity: 0.2;" class="glyph stroked pencil" src="../assets/images/moneydep.png" />€
                                                        {{userLogged.credit}} €
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row" style="margin-left: 10%">
                                            <div class="col-xs-12 col-md-9 col-lg-5">
                                                <div class="panel panel-blue panel-widget">
                                                    <div class="row no-padding">
                                                        <div class="col-sm-3 col-lg-5 widget-left" style="background: #b84f4f;">Saldo apostado</div>
                                                        <div class="col-sm-9 col-lg-7 widget-right">
                                                            <div class="large" style="margin-left: 30px;"> {{amount}} €
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-xs-12 col-md-9 col-lg-5">
                                                <div class="panel panel-blue panel-widget">
                                                    <div class="row no-padding">
                                                        <div class="col-sm-3 col-lg-5 widget-left" style="background: #6470aa;">Posibles Ganancias</div>
                                                        <div class="col-sm-9 col-lg-7 widget-right">
                                                            <div class="large" style="margin-left: 30px;"> {{potentialGain}} €
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-md-8 col-lg-5  col-lg-offset-3 col-md-offset-1">
                                                <div class="panel panel-blue panel-widget">
                                                    <div class="row no-padding">
                                                        <div class="col-sm-3 col-lg-5 widget-left" style="background: #478949;">Total retirable</div>
                                                        <div class="col-sm-9 col-lg-7 widget-right">
                                                            <div class="large" style="margin-left: 30px;"> {{userLogged.credit}} €
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <a routerLink="/user/withdrawcredit" class="btn btn-lg btn-primary" style="float: right; margin-right: 2%; background-color: rgba(235, 199, 44, 0.9); border-color: rgba(235, 199, 44, 0.9); color: white;">Retirar €
                                                </a>
                                            <a routerLink="/user/addcredit" class="btn btn-lg btn-primary" style="float: left; margin-left: 2%; background-color: rgba(235, 199, 44, 0.9); border-color: rgba(235, 199, 44, 0.9); color: white;">Introducir €
                                                </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </tab>
                        <!-- ./tab 2 -->
                        <!-- tab 3 -->
                        <tab (select)="selectTabFromInner(2)">
                            <div class="tab-pane fade in" id="tab3">
                                <div class="panel panel-primary" style="background-color: #FFD288">
                                    <div class="panel-body">
                                        <div class="row">
                                            <div style="margin-bottom: 10px;" class="col-md-12">
                                                <div class="panel-heading">
                                                    CONSULTA TODAS TUS APUESTAS
                                                    <div style="float: right;">
                                                        <span class="glyphicon glyphicon-list" aria-hidden="true"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row sub-row-ffb">
                                            <div class="col-md-11">
                                                <div class="panel panel-default">
                                                    <div class="panel-body tabs">
                                                        <tabset>
                                                            <tab>
                                                                <ng-template tabHeading>
                                                                    Apuestas en curso
                                                                </ng-template>
                                                                <table class="table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Apuesta</th>
                                                                            <th>Importe apostado</th>
                                                                            <th>Posibles ganancias</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tr *ngFor="let ticket of tickets">
                                                                        <td> {{ticket.id}} </td>
                                                                        <td> {{ticket.amount}} € </td>
                                                                        <td> {{ticket.potentialGain}} €</td>
                                                                    </tr>
                                                                </table>
                                                            </tab>
                                                            <tab>
                                                                <ng-template tabHeading>
                                                                    Historial
                                                                </ng-template>
                                                                <table class="table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Apuesta</th>
                                                                            <th>Importe apostado</th>
                                                                            <th>Ganancia</th>
                                                                            <th>Acciones</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tr *ngFor="let finishedTicket of finishedTickets">
                                                                        <td> {{finishedTicket.id}} </td>
                                                                        <td> {{finishedTicket.amount}} € </td>
                                                                        <td *ngIf="finishedTicket.winned"> {{finishedTicket.potentialGain}} €</td>
                                                                        <td *ngIf="!finishedTicket.winned"> PERDIDA €</td>
                                                                        <td>
                                                                            <button (click)="validateTicket(finishedTicket)" value="Canjear"></button>
                                                                            <button (click)="deleteTicket(finishedTicket)" value="Borrar"></button>
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </tab>
                                                        </tabset>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--/.row-->
                                        </div>
                                        <div class="row">
                                            <a routerLink="/user/sportsbet" class="btn btn-lg btn-primary" style="float: right; margin-right: 2%; background-color: rgba(235, 199, 44, 0.9); border-color: rgba(235, 199, 44, 0.9); color:white"
                                                role="button">Apuestas deportivas
                                        </a>
                                            <a routerLink="/user/egamesbet" class="btn btn-lg btn-primary" style="float: left; margin-left: 2%; background-color: rgba(235, 199, 44, 0.9); border-color: rgba(235, 199, 44, 0.9); color:white"
                                                role="button">Apuestas e-games
                                        </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </tab>
                        <!-- ./tab 3 -->
                        <tab (select)="selectTabFromInner(3)">
                            <div class="tab-pane fade in" id="tab4">
                                <div class="panel panel-primary" style="background-color: #FFD288">
                                    <div class="panel-body">
                                        <div class="row">
                                            <div style="margin-bottom: 10px;" class="col-md-12">
                                                <div class="panel-heading">LO ÚLTIMO DE TUS EQUIPOS DE FÚTBOL FAVORITOS</div>
                                            </div>
                                        </div>
                                        <div *ngIf="selectedTeam" class="row" style="margin-bottom: 5%;">
                                            <div class="col-sm-6">
                                                <h3 class="card-title">
                                                    <img src="http://localhost:8080/api/teams/logo/{{selectedTeam.id}}" height="150px" style="margin-left: 10%; float: left">
                                                </h3>
                                                <button type="button" class="btn btn-primary" (click)="isCollapsed = !isCollapsed">
                                                    Cambiar Equipo
                                                </button>
                                            </div>
                                            <div class="col-sm-6">
                                                <h3 class="card-title"> {{selectedTeam.name}} </h3>
                                            </div>
                                        </div>

                                        <div *ngIf="!selectedTeam" class="row" style="margin-bottom: 5%;">
                                            <div class="col-sm-6">
                                                <button type="button" class="btn btn-primary" (click)="isCollapsed = !isCollapsed" style="margin-left: 5%">
                                                    Seleccionar Equipo
                                                </button>
                                            </div>
                                        </div>

                                        <div class="row" style="margin-left: 5%;">
                                            <div class="row" (collapsed)="collapsed($event)" (expanded)="expanded($event)" [collapse]="!isCollapsed">
                                                <div *ngFor="let team of teams" class="col-md-4 col-sm-8 col-lg-4">
                                                    <div class="card">
                                                        <div class="image">
                                                            <img src="http://localhost:8080/api/teams/stadium/{{team.id}}" width="100%">
                                                        </div>
                                                        <div class="text">
                                                            <div class="fab">
                                                                <span (click)="selectTeam(team)" class="glyphicon glyphicon-ok"></span>
                                                            </div>

                                                            <h3>{{team.name}}</h3>
                                                            <p>Presidente: {{team.president}}</p>
                                                            <p>Entrenador: {{team.coach}}</p>
                                                            <p>Estadio: {{team.stadium}}</p>
                                                        </div>
                                                        <div class="social-links text-center">
                                                            <a class="facebook" target="_blank"> <i class="fa fa-facebook fa-fw"></i> </a>
                                                            <a class="google" target="_blank"> <i class="fa fa-google-plus fa-fw"></i> </a>
                                                            <a class="twitter" target="_blank"> <i class="fa fa-twitter fa-fw"></i> </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row sub-row-ffb">
                                            <div class="col-md-11">
                                                <div class="panel panel-default">
                                                    <div class="panel-body tabs">
                                                        <tabset>
                                                            <tab>
                                                                <ng-template tabHeading>
                                                                    <span class="glyphicon glyphicon-indent-left"></span>                                                                    Próximos partidos
                                                                </ng-template>
                                                                <table class="table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Partido</th>
                                                                            <th>Fecha</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tr *ngFor="let match of matches">
                                                                        <td> {{match.homeTeam}} - {{match.visitingTeam}} </td>
                                                                        <td> {{match.date}} </td>
                                                                    </tr>
                                                                </table>
                                                            </tab>
                                                            <tab>
                                                                <ng-template tabHeading>
                                                                    <span class="glyphicon glyphicon-indent-right"></span>                                                                    Últimos partidos
                                                                </ng-template>
                                                                <table class="table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Partido</th>
                                                                            <th>Resultado</th>
                                                                            <th>Fecha</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tr *ngFor="let finishedMatch of finishedMatches">
                                                                        <td> {{finishedMatch.homeTeam}} - {{finishedMatch.visitingTeam}}
                                                                        </td>
                                                                        <td> {{finishedMatch.homePoints}} - {{finishedMatch.visitingPoints}}
                                                                        </td>
                                                                        <td> {{finishedMatch.date}} </td>
                                                                    </tr>
                                                                </table>
                                                            </tab>
                                                        </tabset>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </tab>
                    </tabset>
                </div>
            </div>
        </div>
    </div>
</div>

<ffbcomp-user-footer></ffbcomp-user-footer>